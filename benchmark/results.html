<html>
<head>
<title>Web Array Math API benchmark results</title>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});

function drawChart() {
  var results = [];
  results.push({
    title: "Intel(R) Xeon(R) E5-1620 (quad core) @ 3.60GHz",
    data:  google.visualization.arrayToDataTable(
      // TODO(mage): Build this at run-time from several arrays.
      [
        ['Operation', 'Opera [native API]', 'Chromium 28 [JS]'],
        ['add', 4185.1, 393.6],
        ['sub', 4055.2, 392.5],
        ['mul', 4153.8, 395.5],
        ['mulCplx', 1670.5, 178.4],
        ['div', 944.5, 162.4],
        ['divCplx', 220.6, 149.0],
        ['madd', 4298.6, 353.2],
        ['abs', 6025.3, 451.0],
        ['absCplx', 1238.1, 173.5],
        ['acos', 121.1, 23.3],
        ['asin', 106.8, 23.5],
        ['atan', 105.9, 23.6],
        ['atan2', 68.1, 15.7],
        ['ceil', 6338.3, 57.1],
        ['cos', 236.4, 28.0],
        ['exp', 274.3, 219.2],
        ['floor', 6252.8, 363.0],
        ['log', 253.5, 43.6],
        ['max', 7757.8, 404.9],
        ['min', 7948.0, 452.7],
        ['pow', 86.2, 15.1],
        ['random', 664.1, 188.9],
        ['round', 6350.2, 39.9],
        ['sin', 237.9, 27.7],
        ['sqrt', 3354.7, 177.5],
        ['tan', 174.9, 23.2],
        ['clamp', 5682.7, 311.6],
        ['fract', 6133.4, 362.2],
        ['fill', 6794.7, 601.2],
        ['ramp', 5290.0, 244.3],
        ['sign', 6061.9, 344.8],
        ['sum', 3624.7, 720.7],
        ['sampleLinear', 512.2, 146.6],
        ['sampleLinearRepeat', 511.0, 99.7],
        ['sampleCubic', 76.5, 91.5],
        ['sampleCubicRepeat', 54.0, 48.6],
        ['pack', 383.5, 129.8],
        ['unpack', 236.5, 113.3],
        ['filter(1st order IIR)', 454.2, 178.5],
        ['filter(biquad)', 361.5, 212.5],
        ['filter(32-tab FIR)', 63.1, 14.2],
        ['FFT(256)', 120.0, 24.0],
        ['FFT(2048)', 125.8, 17.9]
      ]
    )
  });

  var width = 1300;
  var height = 2000;

  var options = {
    title: results[0].title,
    vAxis: { title: 'Operation',  titleTextStyle: {color: 'red'} },
    hAxis: { title: 'Processing speed (higher is better) [Ms/s]',  titleTextStyle: {color: 'red'} },
    chartArea: { left: 250, top: 80, height: height - 200 }
  };

  var chartDiv = document.createElement("div");
  chartDiv.style.width = "" + width + "px";
  chartDiv.style.height = "" + height + "px";
  chartDiv.style.position = "position";
  document.getElementById('charts').appendChild(chartDiv);

  var chart = new google.visualization.BarChart(chartDiv);
  chart.draw(results[0].data, options);
}
</script>
<style type="text/css">
body {
  font-family: sans-serif;
}
</style>
</head>
<body onload="drawChart()">
<h2>Web Array Math API benchmark results</h2>

<p>These are some early benchmark results from an experimental (internal) Opera
build with a native Web Array Math API implementation. For comparison, results
from Chromium 28.0.1500.71 are included (using the JavaScript polyfill).</p>

<p>Please note that many optimizations remain to be done in the native
implementation.</p>

<h3>2013-Oct-08</h3>
<div id="charts"></div>

</body>
</html>

